<script type="text/guten-template">
    {{block name="yoast/ingredients" title="Ingredients" category="common" parent=[ "yoast/recipe" ] }}
    <div class={{class-name}}>
        {{variable-tag-rich-text name="title" tags=[ "h2", "h3", "h4", "h5", "h6", "strong" ] }}
        {{variable-tag-rich-text name="ingredients" tags=["ul", "ol"] multiline="li" }}
    </div>
</script>
<script type="text/schema-template">
    {{schema name="yoast/ingredients" only-nested=true }}
    {{list name="ingredients" tag="li" allowedTags=[ "h1","h2","h3","h4","h5","h6","br","a","p","b","strong","i","em" ] }}
</script>
<script type="text/guten-template">
    {{block name="yoast/step" title="Step" category="common" parent=["yoast/steps"]}}
    <li class={{class-name}}>
        {{inner-blocks allowed-blocks=[ "core/heading", "core/paragraph", "core/image" ] }}
    </li>
</script>
<script type="text/schema-template">
    {{schema name="yoast/step" only-nested=true }}
    {
        "@type": "HowToStep",
        "name": {{inner-blocks-attribute blocks={ "core/paragraph": "content", "core/heading": "content" } only-first=true null-when-empty=true }},
        "url": {{block-id}},
        "text": {{inner-blocks-attribute blocks={ "core/paragraph": "content", "core/heading": "content" } skip-first=true null-when-empty=true }},
        "image": {{inner-blocks-id allowed-blocks=[ "core/image" ] only-first=true null-when-empty=true }}
    }
</script>
<script type="text/guten-template">
    {{block name="yoast/steps" title="Steps" category="common" parent=["yoast/recipe"]}}
    <ul class={{class-name}}>
        {{inner-blocks allowed-blocks=["yoast/step"]}}
    </ul>
</script>
<script type="text/schema-template">
    {{schema name="yoast/steps" only-nested=true}}
    {{inner-blocks allowed-blocks=["yoast/step"]}}
</script>
<script type="text/guten-template">
    {{block name="yoast/recipe" title="Recipe" category="common" }}
    {{sidebar-duration name="cook-time" output=false label="Cooking time" }}
    {{sidebar-duration name="prep-time" output=false label="Preparation time" }}
    {{sidebar-input name="yield" output=false type="number" label="Serves #" }}
    <div class={{class-name}}>
        {{variable-tag-rich-text name="title" tags=[ "h1", "h2", "h3", "h4", "h5", "h6", "strong" ] }}
        {{inner-blocks allowed-blocks=[ "core/paragraph", "core/image", "yoast/ingredients" ] }}
    </div>
</script>
<script type="text/schema-template">
    {{schema name="yoast/recipe"}}
    {
        "@type": "Recipe",
        "@id": "{{block-id}}",
        "mainEntityOfPage": {
            "@id": "%%main_schema_id%%"
        },
        "image": {{inner-blocks-id allowed-blocks=[ "core/image" ] only-first=true null-when-empty=true }},
        "name": {{attribute name="title"}},
        "author": {
            "@id": "%%author_id%%"
        },
        "description": {{inner-blocks-attribute blocks={ "core/paragraph": "content" } null-when-empty=true }},
        "cookTime": {{attribute name="cook-time" }},
        "prepTime": {{attribute name="prep-time" }},
        "recipeInstructions": {{inner-blocks allowed-blocks=[ "yoast/steps" ] }},
        "recipeIngredient": {{inner-blocks allowed-blocks=[ "yoast/ingredients" ] }},
        "recipeYield": {{attribute name="yield" }}
    }
</script>
